<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../layui/css/layui.css">
    <script src="../layui/layui.all.js"></script>
    <script src="../layui/echarts.min.js"></script>
</head>

<body style="margin: 300px, 300px;">
    <fieldset class="layui-elem-field layui-field-title">
        <legend>各科成绩图表</legend>
    </fieldset>
    <div id="line" style="height:500px; width: 95%;"></div>

    <br>
    <fieldset class="layui-elem-field layui-field-title">
        <legend>成绩表</legend>
    </fieldset>
    <table class="layui-hide" id="score_table"></table>



</body>

<script type='text/javascript'>
    //折线图
    optionLine = {
        title: {
            text: ''
        },
        toolbox: {
            show: true,
            feature: {

                magicType: { type: ['line', 'bar'] },
                markPoint: {},
                restore: {},
            }
        },
        legend: {
            data: ['语文', '数学'],
            align: 'left',
            top: '4'
        },
        xAxis: {
            type: 'category',
            data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日']
        },
        yAxis: {
            name: '分数(100)',
            type: 'value',
        },
        series: [{
            name: '语文',
            data: [22, 25, 35, 28, 20, 45, 52],
            type: 'line'
        }, {
            name: '数学',
            data: [12, 21, 29, 35, 24, 56, 48],
            type: 'line'
        }],
        tooltip: {
            trigger: 'axis'
        },
        grid: {
            show: false,
            borderColor: '#ebebeb',
            x: 33,
            x2: 0,
            y: 40,
            y2: 0,
            height: 400
        },

    };
    var domLine = document.getElementById("line");
    var chartLine = echarts.init(domLine, 'theme-ax');
    chartLine.setOption(optionLine, true);


    layui.use('table', function () {
        var table = layui.table;

        table.render({
            elem: '#score_table'
            , url: "/a"
            , where: { "type": "语文" }
            , parseData: function (res) { //res 即为原始返回的数据
                return {
                    "code": res.status, //解析接口状态
                    "msg": res.message, //解析提示文本
                    "count": res.total, //解析数据长度
                    "data": res.data.item //解析数据列表
                };
            }
            , cols: [[
                { field: 'id', width: 100, title: 'ID' }
                , { field: 'subject', title: '学科', sort: true }
                , { field: 'score', title: '成绩', sort: true }
                , { field: 'type', title: '分类', sort: true }
                , { field: 'time', minWidth: 300, title: '考试时间', sort: true }
            ]]
            , data: [{ id: "A", subject: "1", score: "1", type: "1", time: new Date().toLocaleDateString() }
                , { id: "B", subject: "1", score: "2", type: "1", time: new Date().toLocaleDateString() }
                , { id: "1", subject: "1", score: "2", type: "1", time: new Date().toLocaleDateString() }
                , { id: "1", subject: "1", score: "1", type: "1", time: new Date().toLocaleDateString() }]
            , page: true
            , limit: 2
        });
    });

</script>


</html>